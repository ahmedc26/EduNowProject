<app-nav-bar></app-nav-bar>

<div class="container">

  <nav class="breadcrumb">
    <a routerLink="/courses">Courses</a>
    <span class="separator">/</span>
    <span>{{ level?.name_Level }} {{level.level_Type}} Topics</span>
  </nav>

  <div class="page-header">
    <h1 class="page-title">
      <i class="fas fa-graduation-cap"></i>
      {{ level?.name_Level }} - {{ level?.level_Type }}
    </h1>
    <p class="page-description">
      Explore all topics available for this level
    </p>
  </div>

  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner"></div>
    <p>Loading topics...</p>
  </div>

  <div *ngIf="errorMessage" class="error-container">
    <div class="error-alert">
      <i class="fas fa-exclamation-circle"></i>
      {{ errorMessage }}
      <button (click)="loadTopicsByLevel()" class="retry-btn">
        <i class="fas fa-redo"></i> Retry
      </button>
    </div>
  </div>


  <div *ngIf="!isLoading && topics.length > 0" class="topics-container">
    <div class="topics-header">
      <h2>Available Topics ({{ topics.length }})</h2>
    </div>

    <div class="topics-grid">
      <div *ngFor="let topic of topics" class="topic-card">
        <div class="topic-header">
          <div class="file-icon">
            <i class="fas {{ getFileIcon(topic) }}"></i>
          </div>
          <div class="topic-info">
            <h3 class="topic-name">{{ topic.name_Topic }}</h3>
            <span class="topic-subject">Subject: {{ topic.subject?.name_Subject }}</span>
          </div>
          <span class="file-type-badge">{{ getFileTypeDisplay(topic) }}</span>
        </div>
        
        <div class="topic-content">
          <p class="file-name" *ngIf="topic.fileName">
            <i class="fas fa-file"></i>
            {{ topic.fileName }}
          </p>
          
          <div class="topic-actions" *ngIf="topic.filePath">
            <button 
              (click)="downloadFile(topic)" 
              class="action-btn download-btn"
              title="Download File"
            >
              <i class="fas fa-download"></i> Download
            </button>
          </div>
          
          <div *ngIf="!topic.filePath" class="no-file-message">
            <i class="fas fa-exclamation-triangle"></i>
            No file available
          </div>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="!isLoading && topics.length === 0 && !errorMessage" class="empty-state">
    <i class="fas fa-folder-open"></i>
    <h3>No Topics Available</h3>
    <p>There are no topics available for this level yet.</p>
    <a routerLink="/courses" class="back-btn">
      <i class="fas fa-arrow-left"></i> Back to Courses
    </a>
  </div>
</div>