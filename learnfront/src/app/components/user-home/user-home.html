<app-nav-bar></app-nav-bar>
<div class="user-home-container">
  <div class="hero-section">
    <div class="hero-content">
      <div class="welcome-message">
        <h1 class="hero-title">
          Welcome back, <span class="user-name">{{userName}}</span>! ðŸ‘‹
        </h1>
        <p class="hero-subtitle">
          Ready to continue your learning journey? Let's make today productive!
        </p>
        <div class="hero-stats">
          <div class="hero-stat">
            <span class="stat-number">0</span>
            <span class="stat-label">Day Streak</span>
          </div>
          <div class="hero-stat">
            <span class="stat-number">{{studentProgress?.totalQuestionsCount}}</span>
            <span class="stat-label">Questions Completed</span>
          </div>
          <div class="hero-stat">
            <span class="stat-number">{{studentProgress?.accuracyPercentage || 0}}%</span>
            <span class="stat-label">Accuracy</span>
          </div>
        </div>
      </div>
      <div class="hero-actions">
        <button class="btn btn-primary" routerLink="/question-generator">
          <i class="fas fa-play"></i>
          Start Learning
        </button>
        <button class="btn btn-secondary" routerLink="/progress-detail">
          <i class="fas fa-chart-line"></i>
          View Progress
        </button>
      </div>
    </div>
    <div class="hero-visual">
      <div class="floating-card">
        <div class="card-content">
          <i class="fas fa-graduation-cap"></i>
          <span>Learning Level</span>
          <strong>{{getCurrentLevel()}}</strong>
        </div>
      </div>
    </div>
  </div>

  
  <div class="dashboard-grid">
    

    <div class="dashboard-card performance-card">
      <div class="card-header">
        <h3><i class="fas fa-trophy"></i> Performance Overview</h3>
        <div class="card-actions">
          <button class="btn-icon" (click)="refreshStats()">
            <i class="fas fa-sync-alt"></i>
          </button>
        </div>
      </div>
      <div class="performance-metrics">
        <div class="metric-item">
          <div class="metric-icon correct">
            <i class="fas fa-check-circle"></i>
          </div>
          <div class="metric-content">
            <span class="metric-value">{{studentProgress?.correctAnswersCount || 0}}</span>
            <span class="metric-label">Correct Answers</span>
          </div>
        </div>
        <div class="metric-item">
          <div class="metric-icon total">
            <i class="fas fa-question-circle"></i>
          </div>
          <div class="metric-content">
            <span class="metric-value">{{studentProgress?.totalQuestionsCount || 0}}</span>
            <span class="metric-label">Total Questions</span>
          </div>
        </div>
        <div class="metric-item">
          <div class="metric-icon accuracy">
            <i class="fas fa-bullseye"></i>
          </div>
          <div class="metric-content">
            <span class="metric-value">{{studentProgress?.accuracyPercentage || 0}}%</span>
            <span class="metric-label">Accuracy Rate</span>
          </div>
        </div>
      </div>
      <div class="performance-chart">
        <div class="chart-bar">
          <div class="bar-fill" [style.width.%]="studentProgress?.accuracyPercentage || 0"></div>
        </div>
        <span class="chart-label">Overall Performance</span>
      </div>
    </div>

   
    <div class="dashboard-card actions-card">
      <div class="card-header">
        <h3><i class="fas fa-bolt"></i> Quick Actions</h3>
      </div>
      <div class="actions-grid">
        <button class="action-btn primary" routerLink="/question-generator">
          <div class="action-icon">
            <i class="fa fa-question" aria-hidden="true"></i>
          </div>
          <div class="action-content">
            <span class="action-title">Practice Questions</span>
            <span class="action-desc">Generate new questions</span>
          </div>
        </button>
        <button class="action-btn secondary" routerLink="/user-levels">
          <div class="action-icon">
            <i class="fas fa-layer-group"></i>
          </div>
          <div class="action-content">
            <span class="action-title">Browse Levels</span>
            <span class="action-desc">Explore topics</span>
          </div>
        </button>
        <button class="action-btn accent" routerLink="/progress-detail">
          <div class="action-icon">
            <i class="fa fa-area-chart" aria-hidden="true"></i>
          </div>
          <div class="action-content">
            <span class="action-title">View Progress</span>
            <span class="action-desc">Track performance</span>
          </div>
        </button>
        <button class="action-btn info" routerLink="/user-profile">
          <div class="action-icon">
            <i class="fas fa-user-cog"></i>
          </div>
          <div class="action-content">
            <span class="action-title">Profile</span>
            <span class="action-desc">Manage account</span>
          </div>
        </button>
      </div>
    </div>

  
    <div class="dashboard-card insights-card">
      <div class="card-header">
        <h3><i class="fas fa-lightbulb"></i> Learning Insights</h3>
      </div>
      <div class="insights-content">
        <div class="insight-item">
          <div class="insight-icon">
            <i class="fas fa-fire"></i>
          </div>
          <div class="insight-text">
            <strong>Great job!</strong> You're on a {{studyStreak}}-day learning streak. Keep it up!
          </div>
        </div>
        <div class="insight-item">
          <div class="insight-icon">
            <i class="fas fa-target"></i>
          </div>
          <div class="insight-text">
            <strong>Focus area:</strong> Try practicing more {{getFocusArea()}} questions to improve.
          </div>
        </div>
        <div class="insight-item">
          <div class="insight-icon">
            <i class="fas fa-clock"></i>
          </div>
          <div class="insight-text">
            <strong>Best time:</strong> You perform best during {{getBestTime()}} sessions.
          </div>
        </div>
      </div>
    </div>


    <div class="dashboard-card activity-card">
      <div class="card-header">
        <h3><i class="fas fa-history"></i> Recent Activity</h3>
        <div class="card-actions">
          <button class="btn-text" routerLink="/progress-detail">View All</button>
        </div>
      </div>
      <div class="activity-list">
        <div class="activity-item" *ngFor="let activity of getRecentActivity()">
          <div class="activity-icon" [class]="activity.type">
            <i [class]="activity.icon"></i>
          </div>
          <div class="activity-content">
            <span class="activity-title">{{activity.title}}</span>
            <span class="activity-time">{{activity.time}}</span>
          </div>
          <div class="activity-status" [class]="activity.status">
            <i [class]="activity.statusIcon"></i>
          </div>
        </div>
      </div>
    </div>


    <div class="dashboard-card goals-card">
      <div class="card-header">
        <h3><i class="fas fa-flag"></i> Study Goals</h3>
        <div class="card-actions">
          <button class="btn-icon" (click)="editGoals()">
            <i class="fas fa-edit"></i>
          </button>
        </div>
      </div>
      <div class="goals-content">
        <div class="goal-item">
          <div class="goal-info">
            <span class="goal-title">Daily Questions</span>
            <span class="goal-progress">{{getDailyProgress()}}/10</span>
          </div>
          <div class="goal-bar">
            <div class="goal-fill" [style.width.%]="getDailyProgress() * 10"></div>
          </div>
        </div>
        <div class="goal-item">
          <div class="goal-info">
            <span class="goal-title">Weekly Accuracy</span>
            <span class="goal-progress">{{getWeeklyAccuracy()}}%</span>
          </div>
          <div class="goal-bar">
            <div class="goal-fill" [style.width.%]="getWeeklyAccuracy()"></div>
          </div>
        </div>
        <div class="goal-item">
          <div class="goal-info">
            <span class="goal-title">Topics This Month</span>
            <span class="goal-progress">{{completedTopics}}/20</span>
          </div>
          <div class="goal-bar">
            <div class="goal-fill" [style.width.%]="(completedTopics / 20) * 100"></div>
          </div>
        </div>
      </div>
    </div>


    <div class="dashboard-card achievements-card">
      <div class="card-header">
        <h3><i class="fas fa-medal"></i> Achievements</h3>
        <div class="card-actions">
          <button class="btn-text" (click)="viewAllAchievements()">View All</button>
        </div>
      </div>
      <div class="achievements-grid">
        <div class="achievement-item" *ngFor="let achievement of getAchievements()" [class.unlocked]="achievement.unlocked">
          <div class="achievement-icon">
            <i [class]="achievement.icon"></i>
          </div>
          <div class="achievement-content">
            <span class="achievement-title">{{achievement.title}}</span>
            <span class="achievement-desc">{{achievement.description}}</span>
          </div>
          <div class="achievement-status">
            <i [class]="achievement.unlocked ? 'fas fa-check-circle' : 'fas fa-lock'"></i>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div class="bottom-actions">
    <button class="btn btn-outline" (click)="logout()">
      <i class="fas fa-sign-out-alt"></i>
      Logout
    </button>
    <button class="btn btn-primary" routerLink="/question-generator">
      <i class="fas fa-rocket"></i>
      Start Learning Session
    </button>
  </div>


  <div class="floating-action-btn" (click)="simulateQuestionAttempt()" title="Add Sample Question">
    <i class="fas fa-plus"></i>
  </div>

  <div class="toast-container" *ngIf="showToast">
    <div class="toast" [class]="toastType">
      <div class="toast-icon">
        <i [class]="toastIcon"></i>
      </div>
      <div class="toast-content">
        <span class="toast-title">{{toastTitle}}</span>
        <span class="toast-message">{{toastMessage}}</span>
      </div>
      <button class="toast-close" (click)="hideToast()">
        <i class="fas fa-times"></i>
      </button>
    </div>
  </div>
</div>